# 视频压缩 App 项目计划

## 项目概述

**项目名称**：Video Compressor Pro  
**技术栈**：Flutter + Bloc + FFmpeg  
**平台**：Android / iOS  
**开发周期**：4 周

---

## 一、里程碑规划

| 阶段 | 时间 | 交付物 |
|------|------|--------|
| M1: 项目搭建 | 第1周 | 项目骨架、FFmpeg集成、基础UI框架 |
| M2: 核心功能 | 第2周 | 本地压缩、批量压缩、进度条 |
| M3: 高级功能 | 第3周 | 远程压缩、压缩预设、压缩历史 |
| M4: 优化上线 | 第4周 | 性能优化、测试、打包发布 |

---

## 二、详细任务分解

### 第1周：项目搭建

| 任务 | 预计工时 | 优先级 |
|------|----------|--------|
| Flutter 项目初始化 | 2h | P0 |
| 目录结构设计 | 1h | P0 |
| Bloc 状态管理架构搭建 | 3h | P0 |
| FFmpeg 编译与集成 | 8h | P0 |
| 主题系统（黑+蓝） | 2h | P0 |
| 底部导航栏 | 2h | P1 |
| 文件选择器集成 | 3h | P0 |

### 第2周：核心功能

| 任务 | 预计工时 | 优先级 |
|------|----------|--------|
| 视频信息获取（分辨率、时长、大小） | 4h | P0 |
| 压缩参数配置 UI | 4h | P0 |
| 单视频压缩功能 | 6h | P0 |
| 压缩进度回调 | 4h | P0 |
| 批量选择视频 | 3h | P0 |
| 批量压缩队列管理 | 6h | P0 |
| 压缩结果展示 | 3h | P1 |

### 第3周：高级功能

| 任务 | 预计工时 | 优先级 |
|------|----------|--------|
| 远程视频下载 | 4h | P1 |
| URL 解析（支持主流平台） | 4h | P2 |
| 压缩预设（低/中/高/自定义） | 3h | P1 |
| 压缩历史记录 | 3h | P2 |
| 压缩前后对比 | 2h | P2 |
| 设置页面 | 2h | P1 |

### 第4周：优化上线

| 任务 | 预计工时 | 优先级 |
|------|----------|--------|
| 单元测试 | 6h | P1 |
| 集成测试 | 4h | P1 |
| 性能优化（内存、电量） | 4h | P0 |
| Android 打包 | 2h | P0 |
| iOS 打包 | 2h | P0 |
| 使用说明文档 | 2h | P2 |

---

## 三、风险项

| 风险 | 影响 | 应对方案 |
|------|------|----------|
| FFmpeg 编译失败 | 阻塞 | 使用预编译版本或 mobile-ffmpeg |
| iOS 后台压缩限制 | 功能受限 | 提示用户保持前台运行 |
| 远程视频版权问题 | 法律风险 | 仅支持用户有权访问的视频 |
| 大文件内存溢出 | 崩溃 | 分块处理、流式压缩 |

---

## 四、依赖清单

### Flutter 依赖
```yaml
dependencies:
  flutter_bloc: ^8.1.0
  equatable: ^2.0.5
  file_picker: ^6.0.0
  path_provider: ^2.1.0
  permission_handler: ^11.0.0
  dio: ^5.4.0
  video_player: ^2.8.0
  shared_preferences: ^2.2.0
  uuid: ^4.0.0
  
dev_dependencies:
  flutter_test:
  bloc_test: ^9.1.0
  mocktail: ^1.0.0
```

### 原生依赖
- Android: FFmpeg (custom build)
- iOS: FFmpeg (custom build)

---

## 五、验收标准

- [ ] 支持选择本地视频（单个/多个）
- [ ] 支持输入 URL 下载远程视频
- [ ] 压缩进度实时显示
- [ ] 可设置压缩质量和分辨率
- [ ] 批量压缩按队列执行
- [ ] 压缩后可预览和分享
- [ ] Android/iOS 双端运行正常
- [ ] 无明显内存泄漏
